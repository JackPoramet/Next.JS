# ‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö‡∏ó‡∏∏‡∏Å Table ‡πÉ‡∏ô PostgreSQL

## üéØ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö Table

### 1. ‡πÉ‡∏ä‡πâ npm scripts (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```bash
# ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å table ‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
npm run db:drop

# ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å table ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏û‡∏£‡πâ‡∏≠‡∏° seed data
npm run db:fresh

# ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô
npm run setup-db    # ‡∏™‡∏£‡πâ‡∏≤‡∏á table ‡πÉ‡∏´‡∏°‡πà
npm run seed        # ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
npm run db:reset    # ‡∏£‡∏±‡∏ô setup-db ‡πÅ‡∏•‡∏∞ seed ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
```

### 2. ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå JavaScript ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

```bash
# ‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
node drop-all-tables.js

# ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏£‡∏∞‡∏ß‡∏±‡∏á!)
node force-drop-tables.js
```

### 3. ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SQL ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `sql-commands/drop-all-tables.sql` ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏•‡∏ö‡∏ó‡∏µ‡∏•‡∏∞ table**
```sql
DROP TABLE IF EXISTS users CASCADE;
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å table ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß**
```sql
DO $$ DECLARE
    r RECORD;
BEGIN
    FOR r IN (SELECT tablename FROM pg_tables WHERE schemaname = 'public') LOOP
        EXECUTE 'DROP TABLE IF EXISTS ' || quote_ident(r.tablename) || ' CASCADE';
    END LOOP;
END $$;
```

### 4. ‡πÉ‡∏ä‡πâ psql command line

```bash
# ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ database
psql -h your-host -U your-username -d your-database

# ‡∏î‡∏π table ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
\dt

# ‡∏•‡∏ö table ‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß
DROP TABLE users CASCADE;

# ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå
\i sql-commands/drop-all-tables.sql

# ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å psql
\q
```

## ‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

1. **‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
2. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DATABASE_URL**: ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö database ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
3. **‡πÉ‡∏ä‡πâ CASCADE ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á**: ‡∏à‡∏∞‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á foreign key relationships

## üîÑ Workflow ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ (Development)
```bash
# ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï database ‡πÉ‡∏´‡∏°‡πà‡∏´‡∏°‡∏î
npm run db:fresh
```

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö (Testing)
```bash
# ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å table
npm run db:drop

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
npm run setup-db

# ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
npm run seed
```

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production (‡∏£‡∏∞‡∏ß‡∏±‡∏á!)
```bash
# ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ô production
# ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ migration scripts ‡πÅ‡∏ó‡∏ô
```

## üìã ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Database

```bash
# ‡∏î‡∏π table ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
psql -c "\dt" DATABASE_URL

# ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô table
psql -c "SELECT count(*) FROM pg_tables WHERE schemaname = 'public';" DATABASE_URL

# ‡∏î‡∏π‡∏Ç‡∏ô‡∏≤‡∏î database
psql -c "SELECT pg_size_pretty(pg_database_size('your_database_name'));" DATABASE_URL
```

## üö® ‡∏Å‡∏£‡∏ì‡∏µ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô

‡∏´‡∏≤‡∏Å script ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ:

```sql
-- ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô public schema
DROP SCHEMA public CASCADE;
CREATE SCHEMA public;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO public;
```

## üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå root ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
- scripts ‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å `.env.local`
- ‡πÉ‡∏ä‡πâ `CASCADE` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö dependencies ‡∏î‡πâ‡∏ß‡∏¢
- scripts ‡∏°‡∏µ error handling ‡πÅ‡∏•‡∏∞ logging ‡πÅ‡∏•‡πâ‡∏ß
