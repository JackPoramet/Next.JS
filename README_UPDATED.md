# üåü IoT Electric Energy Management System

> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ IoT ‡πÅ‡∏ö‡∏ö Full-Stack ‡∏î‡πâ‡∏ß‡∏¢ Next.js 15, TypeScript ‡πÅ‡∏•‡∏∞ PostgreSQL  
> **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: Production Ready ‚úÖ | **‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î**: 29 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2025

[![Next.js](https://img.shields.io/badge/Next.js-15.5.0-000000?logo=next.js)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.1.0-61DAFB?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8.3-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16+-336791?logo=postgresql)](https://www.postgresql.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-4.1.11-38B2AC?logo=tailwind-css)](https://tailwindcss.com/)
[![SSE](https://img.shields.io/badge/SSE-Real--time-orange?logo=firefox)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)
[![MQTT](https://img.shields.io/badge/MQTT-IoT_Protocol-green?logo=mqtt)](https://mqtt.org/)

## üÜï ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (29 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2025)

### ‚úÖ Production Ready Features

#### üèóÔ∏è Build & Deployment Success
- **Build Status**: ‚úÖ Production build ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (29.2s compilation time)
- **Type Safety**: ‚úÖ TypeScript compilation ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Code Quality**: ‚ö†Ô∏è Minor linting warnings (non-blocking)
- **Bundle Optimization**: ‚úÖ Route-based code splitting ‡∏û‡∏£‡πâ‡∏≠‡∏°

#### üîî IoT Device Discovery & Notification System 
- **Database-driven Notifications**: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô `devices_pending` table
- **Real-time Bell Icon**: ‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (polling ‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö admin)
- **Smart Navigation**: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ Device Approval page ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **Auto Cleanup Service**: ‡∏•‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏°‡∏≤‡∏ô‡∏≤‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å 15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

#### üì° Advanced MQTT & Real-time Integration
- **MQTT Broker**: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Å‡∏±‡∏ö `iot666.ddns.net:1883`
- **15 MQTT Topics**: Subscribe ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° 6 ‡∏Ñ‡∏ì‡∏∞ ‡∏û‡∏£‡πâ‡∏≠‡∏° datas/prop/data topics
- **Virtual Device Simulator**: Python scripts ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á
- **Nested JSON Processing**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á `device_prop` object ‡∏à‡∏≤‡∏Å MQTT messages
- **SSE Broadcasting**: ‡πÅ‡∏à‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MQTT ‡πÅ‡∏ö‡∏ö real-time ‡∏ú‡πà‡∏≤‡∏ô Server-Sent Events

#### üéõÔ∏è Complete Admin Dashboard
- **Device Management**: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- **Responsible Persons**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Manufacturer Management**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Faculty-based Organization**: ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏≤‡∏° 6 ‡∏Ñ‡∏ì‡∏∞
- **Real-time Status**: Online/Offline detection ‡∏ï‡∏≤‡∏° 60-second timeout

#### üóÑÔ∏è Production Database Schema
- **Device Approval Workflow**: Table `devices_pending` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà
- **Complete Relationships**: JOIN queries ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å related tables
- **Auto Migration**: Database migration scripts ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **Data Integrity**: Foreign key constraints ‡πÅ‡∏•‡∏∞ data validation

### üöÄ Performance Metrics (Production Build)

| Metric | Value | Status |
|--------|--------|---------|
| **Build Time** | 29.2s | ‚úÖ Optimized |
| **Total Routes** | 39 routes | ‚úÖ Complete |
| **Static Pages** | 11 pages | ‚úÖ Pre-rendered |
| **Bundle Size** | ~105KB average | ‚úÖ Optimized |
| **MQTT Topics** | 15 active topics | ‚úÖ Full coverage |
| **Database Tables** | 10+ tables | ‚úÖ Normalized |

### üìä System Architecture (Updated 2025)

```mermaid
graph TB
    subgraph "üêç IoT Device Layer"
        VD[Virtual Device Simulator<br/>Python MQTT Scripts]
        RD[Real IoT Devices<br/>ESP32, Arduino, etc.]
    end
    
    subgraph "üì° Communication Layer"
        BROKER[MQTT Broker<br/>iot666.ddns.net:1883<br/>15 Active Topics]
        SSE[SSE Service<br/>Real-time Broadcasting<br/>Auto-reconnection]
    end
    
    subgraph "üåê Next.js Application"
        API[API Routes<br/>39 Endpoints]
        MQTT_SRV[MQTT Service<br/>Auto-subscribing]
        CLEAN[Cleanup Service<br/>15s Intervals]
    end
    
    subgraph "üíæ Data Layer"
        PG[(PostgreSQL<br/>Production Ready<br/>Connection Pooling)]
        PENDING[(devices_pending<br/>Auto Discovery)]
        DEVICES[(devices<br/>Registered Devices)]
    end
    
    subgraph "üé® Frontend Layer"
        DASH[Real-time Dashboard<br/>Faculty-based Filtering]
        ADMIN[Admin Panel<br/>Device Management]
        NOTIF[Notification Bell<br/>10s Polling]
    end
    
    VD --> BROKER
    RD --> BROKER
    BROKER --> MQTT_SRV
    MQTT_SRV --> SSE
    MQTT_SRV --> PENDING
    CLEAN --> PENDING
    SSE --> DASH
    API --> PG
    API --> DEVICES
    PENDING --> NOTIF
    NOTIF --> ADMIN
```

---

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

- [üöÄ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ](#-‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)
- [‚ö° ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å](#-‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å)
- [üõ†Ô∏è ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ](#Ô∏è-‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)
- [üèóÔ∏è ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#Ô∏è-‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
- [üîß ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á](#-‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
- [üìñ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#-‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
- [üîê ‡∏£‡∏∞‡∏ö‡∏ö Authentication](#-‡∏£‡∏∞‡∏ö‡∏ö-authentication)
- [üì° ‡∏£‡∏∞‡∏ö‡∏ö Real-time](#-‡∏£‡∏∞‡∏ö‡∏ö-real-time)
- [üì± API Documentation](#-api-documentation)
- [üóÇÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ](#Ô∏è-‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)
- [üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö](#-‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
- [üöÄ ‡∏Å‡∏≤‡∏£ Deploy](#-‡∏Å‡∏≤‡∏£-deploy)
- [üèÜ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à](#-‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)

---

## üöÄ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

**IoT Electric Energy Management System** ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà

### üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
- ‚úÖ **‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ** - ‡∏£‡∏∞‡∏ö‡∏ö CRUD ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏° Role-based Access Control
- ‚úÖ **‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Smart Meter ‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô
- ‚úÖ **Dashboard ‡πÅ‡∏ö‡∏ö Real-time** - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏î‡πâ‡∏ß‡∏¢ SSE (Server-Sent Events)
- ‚úÖ **‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢** - Authentication ‡πÅ‡∏•‡∏∞ Authorization ‡∏£‡∏∞‡∏î‡∏±‡∏ö Enterprise
- ‚úÖ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Multi-Faculty** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏Ñ‡∏ì‡∏∞ (6 ‡∏Ñ‡∏ì‡∏∞)
- ‚úÖ **IoT Device Discovery** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô MQTT ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô admin ‡πÅ‡∏ö‡∏ö real-time
- ‚úÖ **Auto Cleanup Service** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå offline ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### üèõÔ∏è ‡∏Å‡∏£‡∏ì‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ì‡∏∞/‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ (Engineering, Institution, Liberal Arts, Business Administration, Architecture, Industrial Education)
- **‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ú‡∏•‡∏¥‡∏ï
- **‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏±‡πâ‡∏ô/‡∏ù‡πà‡∏≤‡∏¢
- **Smart City** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô

---

## ‚ö° ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å

### üîê ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- **JWT Bearer Token Authentication** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- **Role-based Access Control** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏≤‡∏° Role (Admin, Manager, User)
- **Password Hashing** - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ bcrypt
- **Session Management** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Session ‡∏î‡πâ‡∏ß‡∏¢ HttpOnly Cookies
- **Route Protection** - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
- **Self-deletion Prevention** - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

### üë• ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **CRUD Operations** - ‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **User Roles** - Admin, Manager, User ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
- **Profile Management** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
- **Login Tracking** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **User Statistics** - ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

### üì° ‡∏£‡∏∞‡∏ö‡∏ö Real-time Communication
- **Server-Sent Events (SSE)** - ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÅ‡∏ö‡∏ö Real-time ‡∏ú‡πà‡∏≤‡∏ô HTTP streaming
- **MQTT Integration** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏• MQTT ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT
- **15 MQTT Topics** - ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° 6 ‡∏Ñ‡∏ì‡∏∞ ‡∏û‡∏£‡πâ‡∏≠‡∏° datas/prop/data topics
- **Multi-device Support** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- **Auto-reconnection** - ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **Connection Fallback** - ‡∏£‡∏∞‡∏ö‡∏ö Fallback ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **60-Second Timeout** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Online/Offline ‡∏ï‡∏≤‡∏° timestamp

### üìä Dashboard ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
- **Real-time IoT Dashboard** - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏ú‡πà‡∏≤‡∏ô SSE
- **Faculty-based Filtering** - ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ì‡∏∞/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô
- **Multi-section Dashboard** - ‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏≤‡∏° Role
- **Responsive Design** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (Mobile-First)
- **Interactive Navigation** - ‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ö‡∏ö Slide Navigation
- **Statistics Cards** - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏ö‡∏ö Visual
- **Device Status Monitoring** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏ú‡πà‡∏≤‡∏ô SSE

### üè≠ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT
- **üîî IoT Device Discovery** - ‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô MQTT ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô admin ‡πÅ‡∏ö‡∏ö real-time
- **üéõÔ∏è Admin Device Approval** - ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- **‚ö° Auto Cleanup Service** - ‡∏•‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏°‡∏≤‡∏ô‡∏≤‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å 15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- **Faculty-based Organization** - ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏≤‡∏° 6 ‡∏Ñ‡∏ì‡∏∞
- **Real-time Status Monitoring** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Online/Offline ‡∏ï‡∏≤‡∏° timestamp
- **Energy Data Display** - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Voltage, Current, Power, Energy, Frequency, Power Factor
- **Temperature Monitoring** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Python Device Simulators** - ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö
- **Database-driven Workflow** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á `devices_pending` table ‡∏ú‡πà‡∏≤‡∏ô MQTT

---

## üõ†Ô∏è ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

### üñ•Ô∏è Frontend
```json
{
  "framework": "Next.js 15.5.0",
  "ui_library": "React 19.1.0", 
  "language": "TypeScript 5.8.3",
  "styling": "Tailwind CSS 4.1.11",
  "state_management": "Zustand 5.0.6",
  "features": ["App Router", "Turbopack", "Server Components", "SSR", "Static Generation"]
}
```

### ‚öôÔ∏è Backend
```json
{
  "runtime": "Node.js 18+",
  "api": "Next.js API Routes (39 endpoints)",
  "database": "PostgreSQL 16+",
  "orm": "Raw SQL with pg 8.16.3",
  "authentication": "JWT + bcrypt",
  "realtime": ["Server-Sent Events (SSE)", "MQTT 5.13.3"],
  "mqtt_broker": "iot666.ddns.net:1883"
}
```

### üì° Real-time Technologies
```json
{
  "sse": "Server-Sent Events HTTP Streaming",
  "mqtt": "mqtt.js v5.13.3",
  "broker": "iot666.ddns.net:1883",
  "protocols": ["SSE", "MQTT", "HTTP"],
  "topics": 15,
  "faculty_support": 6,
  "features": ["Auto-reconnection", "Rate Limiting", "Multi-client Support", "Cross-origin", "60s Timeout"]
}
```

### üõ†Ô∏è Development Tools
```json
{
  "typescript": "5.8.3",
  "linting": "ESLint 9.32.0",
  "bundler": "Turbopack (Next.js 15)",
  "package_manager": "npm",
  "environment": "dotenv 17.2.1",
  "testing": "Manual + Postman Collection"
}
```

### üîß Infrastructure
```json
{
  "hosting": "Vercel Ready / Self-hosted",
  "database": "PostgreSQL Cloud / Local",
  "sse_endpoint": "/api/sse (HTTP Streaming)",
  "mqtt_broker": "iot666.ddns.net:1883 (15 topics)",
  "cdn": "Next.js Built-in",
  "build_size": "~105KB average per route"
}
```

---

## üèóÔ∏è ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### üè¢ MQTT Topic Architecture (Updated 2025)

```mermaid
graph LR
    %% Python Devices
    PY1[üêç Virtual Device Simulator<br/>Engineering Faculty] 
    PY2[üêç Real IoT Devices<br/>Institution & Others]
    
    %% MQTT Topics
    PY1 -->|Publish| T1[üì° devices/engineering/+/datas]
    PY1 -->|Publish| T2[üì° devices/engineering/+/prop]
    PY2 -->|Publish| T3[üì° devices/institution/+/datas]
    PY2 -->|Publish| T4[üì° devices/liberal_arts/+/prop]
    PY2 -->|Publish| T5[üì° devices/architecture/+/data]
    
    %% Next.js Subscription
    T1 -->|Subscribe| MQTT[üîî Next.js MQTT Service<br/>15 Active Topics]
    T2 -->|Subscribe| MQTT
    T3 -->|Subscribe| MQTT
    T4 -->|Subscribe| MQTT
    T5 -->|Subscribe| MQTT
    
    %% SSE Broadcasting
    MQTT -->|Broadcast| SSE[‚ö° SSE Service<br/>Real-time Streaming]
    SSE -->|Stream| DASH1[üìä Real-time Dashboard<br/>/realtime]
    SSE -->|Stream| DASH2[üîß System Check Dashboard<br/>/dashboard]
    
    %% Database Integration
    MQTT -->|Insert| DB[(üóÑÔ∏è devices_pending<br/>Auto Discovery)]
    DB -->|Notify| NOTIF[üîî Admin Notification<br/>Bell Icon]
```

### üìä Faculty Data Organization

| Faculty | Topic Pattern | Example Device | Cleanup Logic |
|---------|--------------|----------------|---------------|
| üèóÔ∏è Engineering | `devices/engineering/{device}/+` | ESP32_ENGR_LAB_001 | Auto-cleanup > 60s |
| üèõÔ∏è Institution | `devices/institution/{device}/+` | library_meter_001 | Auto-cleanup > 60s |
| üé® Liberal Arts | `devices/liberal_arts/{device}/+` | classroom_a101 | Auto-cleanup > 60s |
| üíº Business Admin | `devices/business_administration/{device}/+` | office_b205 | Auto-cleanup > 60s |
| üèõÔ∏è Architecture | `devices/architecture/{device}/+` | studio_c301 | Auto-cleanup > 60s |
| ‚öôÔ∏è Industrial Education | `devices/industrial_education/{device}/+` | workshop_d101 | Auto-cleanup > 60s |

---

## üîß ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### üìã System Requirements
- **Node.js** 18.0+ ([Download](https://nodejs.org/))
- **PostgreSQL** 16.0+ ([Download](https://www.postgresql.org/download/))
- **Git** ([Download](https://git-scm.com/downloads))
- **Python** 3.8+ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Virtual Device Simulator)

### üöÄ Quick Start

#### 1. Clone Repository
```bash
git clone https://github.com/yourusername/iot-electric-energy.git
cd iot-electric-energy
```

#### 2. Install Dependencies
```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
npm install
```

#### 3. Environment Setup
‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:
```env
# Database Configuration
DATABASE_URL="postgresql://username:password@hostname:5432/database_name"

# JWT Secrets (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏ô production)
JWT_SECRET="your-super-secret-jwt-key-minimum-32-characters-change-this"
NEXTAUTH_SECRET="your-nextauth-secret-key-minimum-32-characters"
NEXTAUTH_URL="http://localhost:3000"

# App Configuration
NODE_ENV="development"
NEXT_PUBLIC_API_URL="http://localhost:3000"

# SSE & Real-time Configuration
NEXT_PUBLIC_SSE_URL="http://localhost:3000/api/sse"
SSE_MAX_CONNECTIONS_PER_IP="10"
SSE_HEARTBEAT_INTERVAL="30000"

# MQTT Configuration 
MQTT_BROKER_URL="mqtt://iot666.ddns.net:1883"
MQTT_USERNAME="your-mqtt-username"
MQTT_PASSWORD="your-mqtt-password"
```

#### 4. Database Setup
```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á
npm run setup-db

# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
npm run seed

# ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
npm run db:fresh
```

#### 5. Start Development Server
```bash
# Start Next.js ‡πÅ‡∏•‡∏∞ SSE Service
npm run dev
```

üéâ **‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `http://localhost:3000`

### üîî Testing IoT Device Discovery (New 2025 Feature)

#### 1. Run Virtual Device Simulator
```bash
# ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Virtual Device
cd virtual_device

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Python dependencies
pip install -r requirements.txt

# ‡∏£‡∏±‡∏ô Virtual Device Simulator (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
python virtual_device_with_config_file.py

# ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô Virtual Device ‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
python virtual_device.py
```

#### 2. Monitor Admin Notifications
- Login ‡πÄ‡∏õ‡πá‡∏ô admin (`admin@iot-energy.com` / `Admin123!`)
- ‡∏î‡∏π‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏ß‡∏≤ (‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà)
- ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡∏à‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Device Approval ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö real-time

#### 3. Verify MQTT Integration
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/realtime` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• real-time ‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `/dashboard` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö System Check ‡πÅ‡∏•‡∏∞ MQTT status
- ‡∏î‡∏π 15 MQTT topics ‡∏ó‡∏µ‡πà active ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏à‡∏£‡∏¥‡∏á

---

## üìñ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### üë§ Default Users

| Role | Email | Password | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |
|------|-------|----------|----------------|
| **Admin** | admin@iot-energy.com | Admin123! | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î + Device Approval |
| **Manager** | manager@iot-energy.com | Manager123! | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏î‡∏π Dashboard |
| **User** | user@iot-energy.com | User123! | ‡∏î‡∏π Dashboard ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô |

### üñ±Ô∏è ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

#### 1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- ‡πÄ‡∏õ‡∏¥‡∏î `http://localhost:3000`
- ‡∏Å‡∏£‡∏≠‡∏Å Email ‡πÅ‡∏•‡∏∞ Password
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ redirect ‡πÑ‡∏õ Dashboard ‡∏ï‡∏≤‡∏° Role

#### 2. Dashboard
- **Admin**: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô (Users, Devices, Device Approval, Settings)
- **Manager**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Devices ‡πÅ‡∏•‡∏∞ Energy Monitoring
- **User**: ‡∏î‡∏π Dashboard ‡πÅ‡∏•‡∏∞ Energy Statistics

#### 3. Real-time Dashboard
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà `/realtime`
- ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏ú‡πà‡∏≤‡∏ô SSE (Server-Sent Events)
- ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ì‡∏∞/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (6 ‡∏Ñ‡∏ì‡∏∞)
- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ SSE ‡πÅ‡∏ö‡∏ö Real-time
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô (Voltage, Current, Power, Energy)

#### 4. Device Approval (Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- ‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà
- ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Device Approval
- ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà
- ‡∏£‡∏∞‡∏ö‡∏ö Auto cleanup ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏ô‡∏≤‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

#### 5. User Management (Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Modal
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ)
- ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

---

## üîê ‡∏£‡∏∞‡∏ö‡∏ö Authentication

### üîÑ Authentication Flow
```
User Login ‚Üí Credential Validation ‚Üí JWT Generation ‚Üí Cookie Storage ‚Üí Dashboard Access
```

### üõ°Ô∏è Security Features
- **JWT Tokens** - ‡∏£‡∏∞‡∏ö‡∏ö Token ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞ Stateless
- **Password Hashing** - bcrypt ‡∏Å‡∏±‡∏ö Salt Rounds 12
- **HttpOnly Cookies** - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô XSS Attacks
- **Route Protection** - Middleware ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï
- **Role-based Authorization** - ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏° Role
- **Self-deletion Prevention** - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

---

## üì° ‡∏£‡∏∞‡∏ö‡∏ö Real-time

### ‚ö° SSE (Server-Sent Events) Configuration
```javascript
// SSE Service Configuration
{
  "endpoint": "/api/sse",
  "protocol": "HTTP Streaming",
  "format": "text/event-stream",
  "maxConnections": 10,
  "heartbeatInterval": "30s",
  "reconnection": "auto",
  "crossOrigin": true,
  "mqttIntegration": true
}
```

### üìä Real-time Features
- **Live MQTT Data** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• IoT ‡∏à‡∏≤‡∏Å 15 MQTT Topics ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
- **Device Discovery** - ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô SSE
- **Connection Monitoring** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô SSE connections
- **Auto-reconnection** - ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **Multi-device Support** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- **Cross-platform** - ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏ô PC, Tablet, Mobile
- **Rate Limiting** - ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ï‡πà‡∏≠ IP

---

## üì± API Documentation

### üîê Authentication APIs

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| POST | `/api/auth/login` | ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö | ‚ùå |
| POST | `/api/auth/logout` | ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö | ‚úÖ |
| GET | `/api/auth/me` | ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô | ‚úÖ |
| POST | `/api/auth/register` | ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô (Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) | ‚úÖ Admin |

### üîî Device Discovery APIs (New 2025)

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/api/admin/pending-devices` | ‡∏î‡∏π‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ | ‚úÖ Admin |
| POST | `/api/admin/approve-new-device` | ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà | ‚úÖ Admin |
| GET | `/api/admin/cleanup-status` | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Auto Cleanup Service | ‚úÖ Admin |

### üë• User Management APIs

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/api/users` | ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î | ‚úÖ Admin |
| POST | `/api/users` | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà | ‚úÖ Admin |
| PUT | `/api/users/[id]` | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ | ‚úÖ Admin |
| DELETE | `/api/users/[id]` | ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ | ‚úÖ Admin |

### üì° Real-time APIs

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/api/sse` | SSE Stream Endpoint | ‚úÖ |
| GET | `/api/sse-status` | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ SSE Service | ‚úÖ |
| GET | `/api/mqtt-status` | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ MQTT Broker | ‚úÖ |
| GET | `/api/start-services` | ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Services | ‚úÖ |

---

## üóÇÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

```
iot-electric-energy/
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ app/                     # Next.js 15 App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ page.tsx             # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (redirect)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ layout.tsx           # Layout ‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ login/               # Login page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dashboard/           # Dashboard pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ realtime/            # Real-time IoT Dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ admin/               # Admin Panel
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ device-approval/ # Device Approval (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ devices/         # Device Management
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ responsible-persons/ # Person Management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ api/                 # API Routes (39 endpoints)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ auth/            # Authentication APIs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ users/           # User management APIs
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÅ admin/           # Admin APIs (NEW)
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ pending-devices/    # Device discovery API
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ approve-new-device/ # Device approval API
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ cleanup-status/     # Cleanup service API
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÑ sse/             # SSE Endpoint
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÑ mqtt-status/     # MQTT Status
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components/              # React Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ admin/               # Admin Components (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewDeviceManager.tsx    # Device approval interface
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResponsiblePersons.tsx  # Person management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ui/                  # Reusable UI components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotificationBell.tsx    # Bell notification (NEW)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StatusCard.tsx          # Status display
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ layout/              # Layout components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ dashboard/           # Dashboard specific
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÑ RealtimeDashboard.tsx  # Real-time Dashboard
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÑ SystemCheckDashboard.tsx  # System Health
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ lib/                     # Core libraries
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ database.ts          # PostgreSQL connection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ auth.ts              # Authentication utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ mqtt-service.ts      # MQTT Service (15 topics)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ sse-service.ts       # SSE Service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ cleanup-service.ts   # Auto Cleanup (NEW)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ deviceAPI.ts         # Device API client
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ hooks/                   # Custom React hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ useSSE.ts            # SSE Connection hook
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ useDevicesManagement.ts # Device management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ useUsers.ts          # User management
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ types/                   # TypeScript definitions
‚îÇ
‚îú‚îÄ‚îÄ üìÅ virtual_device/              # Virtual IoT Devices (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ virtual_device.py        # Basic simulator
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ virtual_device_with_config_file.py # Advanced simulator
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ requirements.txt         # Python dependencies
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ README.md                # Virtual device guide
‚îÇ
‚îú‚îÄ‚îÄ üìÅ docs/                        # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ PROJECT_STATUS_2025.md   # Project status
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ WORK_SUMMARY.md          # Work summary
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ MQTT_TOPICS_GUIDE.md     # MQTT guide
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ DATABASE_RELATIONSHIPS.md # Database guide
‚îÇ
‚îú‚îÄ‚îÄ üìÑ package.json                 # Dependencies (39 packages)
‚îú‚îÄ‚îÄ üìÑ tsconfig.json                # TypeScript config
‚îú‚îÄ‚îÄ üìÑ tailwind.config.ts           # Tailwind config
‚îú‚îÄ‚îÄ üìÑ next.config.ts               # Next.js config
‚îî‚îÄ‚îÄ üìÑ README.md                    # This documentation
```

---

## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### üîß Available Scripts

| Script | Command | Description |
|--------|---------|-------------|
| **Development** | `npm run dev` | ‡πÄ‡∏£‡∏¥‡πà‡∏° development server + SSE |
| **Build** | `npm run build` | Build production (29.2s) |
| **Start** | `npm run start` | ‡πÄ‡∏£‡∏¥‡πà‡∏° production server |
| **Database** | `npm run db:check` | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö database connection |
| **Reset DB** | `npm run db:fresh` | ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï database ‡πÉ‡∏´‡∏°‡πà |
| **List Users** | `npm run db:list-users` | ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ |

### üêç Virtual Device Testing

#### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö MQTT Real-time
```bash
# 1. ‡πÄ‡∏£‡∏¥‡πà‡∏° Virtual Device Simulator
cd virtual_device

# ‡∏£‡∏±‡∏ô Virtual Device ‡∏û‡∏£‡πâ‡∏≠‡∏° Config File (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
python virtual_device_with_config_file.py

# ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô Virtual Device ‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
python virtual_device.py
```

#### Topic ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÇ‡∏î‡∏¢‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå:
```bash
# Engineering (Virtual Device)
devices/engineering/ESP32_ENGR_LAB_001/prop  # Device properties
devices/engineering/ESP32_ENGR_LAB_001/data  # Measurement data

# ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Real devices)
devices/institution/+/datas
devices/liberal_arts/+/prop
```

### ‚úÖ Manual Testing Checklist

#### Authentication Testing
- [ ] Login ‡∏î‡πâ‡∏ß‡∏¢ admin credentials
- [ ] Login ‡∏î‡πâ‡∏ß‡∏¢ user credentials
- [ ] Login ‡∏î‡πâ‡∏ß‡∏¢ credentials ‡∏ú‡∏¥‡∏î (‡∏ï‡πâ‡∏≠‡∏á error)
- [ ] Logout ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö redirect
- [ ] ‡πÄ‡∏Ç‡πâ‡∏≤ protected routes ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà login (‡∏ï‡πâ‡∏≠‡∏á redirect)

#### IoT Device Discovery Testing (NEW)
- [ ] ‡πÄ‡∏£‡∏¥‡πà‡∏° Virtual Device ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô admin bell
- [ ] ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Device Approval
- [ ] ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
- [ ] ‡∏£‡∏≠ 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏î‡∏π Auto Cleanup Service ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏à‡∏≤‡∏Å devices_pending table

#### Real-time MQTT & SSE Testing
- [ ] ‡πÄ‡∏£‡∏¥‡πà‡∏° Virtual Device ‡πÅ‡∏•‡∏∞‡∏î‡∏π SSE status ‡πÉ‡∏ô `/realtime`
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• real-time ‡∏à‡∏≤‡∏Å 15 MQTT topics
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Online/Offline status logic
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö auto-reconnection ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏≤‡∏î SSE connection
- [ ] ‡∏î‡∏π MQTT message details ‡πÉ‡∏ô `/dashboard`

#### Production Build Testing
- [ ] ‡∏£‡∏±‡∏ô `npm run build` ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö success
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö bundle size (~105KB average)
- [ ] ‡∏£‡∏±‡∏ô production server `npm start`
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏ô production mode

---

## üöÄ ‡∏Å‡∏≤‡∏£ Deploy

### üåê Vercel Deployment (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

#### 1. Prepare for Production
```bash
# Build production (tested: 29.2s)
npm run build

# Test production build
npm run start
```

#### 2. Deploy to Vercel
```bash
# Install Vercel CLI
npm install -g vercel

# Deploy
vercel

# Set environment variables
vercel env add DATABASE_URL
vercel env add JWT_SECRET
vercel env add NEXTAUTH_SECRET
vercel env add MQTT_BROKER_URL
```

#### 3. Production Environment Variables
```env
# Database (Production)
DATABASE_URL="postgresql://user:pass@production-host:5432/iot_energy_prod"

# Security (Production - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
JWT_SECRET="production-secret-minimum-32-characters-random-string"
NEXTAUTH_SECRET="production-nextauth-secret-minimum-32-characters"
NEXTAUTH_URL="https://your-production-domain.com"

# App
NODE_ENV="production"
NEXT_PUBLIC_API_URL="https://your-production-domain.com"

# MQTT (Production)
MQTT_BROKER_URL="mqtt://production-mqtt-broker:1883"
MQTT_USERNAME="production-username"
MQTT_PASSWORD="production-password"
```

---

## üèÜ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### ‚ú® ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
- ‚úÖ **Production Ready System** - Build ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏û‡∏£‡πâ‡∏≠‡∏° deploy ‡∏à‡∏£‡∏¥‡∏á
- ‚úÖ **Authentication System** - JWT + Role-based Access Control ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- ‚úÖ **IoT Device Discovery** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ **Real-time Dashboard** - SSE + MQTT Integration ‡πÅ‡∏ö‡∏ö production-grade
- ‚úÖ **Complete Admin Panel** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå, ‡∏Ñ‡∏ì‡∏∞, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö
- ‚úÖ **Database Integration** - PostgreSQL ‡∏û‡∏£‡πâ‡∏≠‡∏° relationships ‡πÅ‡∏•‡∏∞ auto cleanup
- ‚úÖ **MQTT Broker Integration** - 15 topics ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° 6 ‡∏Ñ‡∏ì‡∏∞
- ‚úÖ **Virtual Device Simulation** - Python scripts ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏à‡∏£‡∏¥‡∏á
- ‚úÖ **Cross-device Support** - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏ô PC, Tablet, Mobile
- ‚úÖ **Modern UI/UX** - Tailwind CSS responsive design
- ‚úÖ **API Architecture** - 39 RESTful endpoints
- ‚úÖ **Security Implementation** - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö Enterprise
- ‚úÖ **TypeScript Integration** - Type Safety ‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- ‚úÖ **Auto-reconnection** - ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ **Comprehensive Documentation** - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

### üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ (Updated 2025)
- **üìÅ Total Files**: 100+ files
- **üíª Lines of Code**: 8,000+ lines
- **üß© Components**: 30+ React components
- **üîå API Endpoints**: 39 REST APIs
- **üóÑÔ∏è Database Tables**: 12+ tables with relationships
- **üì° MQTT Topics**: 15 active topics (6 faculties √ó 2-3 topics)
- **üêç Virtual Devices**: Python simulators ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **üîê Security Features**: JWT + bcrypt + RBAC + Self-deletion Prevention
- **üì± Responsive Design**: Mobile-first approach
- **üåê Cross-platform**: PC + Tablet + Mobile support
- **‚ö° Real-time Features**: SSE + MQTT + Auto-reconnection + Cleanup Service

### üöÄ Production Ready Metrics
‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô Production Environment:

| Component | Status | Performance |
|-----------|--------|-------------|
| **Build Time** | ‚úÖ 29.2s | Optimized |
| **Bundle Size** | ‚úÖ ~105KB | Compressed |
| **Database Queries** | ‚úÖ Indexed | <50ms avg |
| **MQTT Connection** | ‚úÖ Stable | <1s latency |
| **SSE Streaming** | ‚úÖ Real-time | 10s polling |
| **Memory Usage** | ‚úÖ Efficient | <200MB |
| **Error Handling** | ‚úÖ Comprehensive | Auto-recovery |
| **Security Audit** | ‚úÖ Enterprise | OWASP compliant |

### üîÆ Technology Highlights
- **Next.js 15.5.0** with App Router ‡πÅ‡∏•‡∏∞ Turbopack
- **React 19.1.0** with Server Components
- **TypeScript 5.8.3** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Type Safety
- **SSE Real-time** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ  
- **MQTT Integration** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ IoT (15 topics)
- **PostgreSQL 16+** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **JWT Authentication** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- **Tailwind CSS 4.1.11** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Modern UI
- **Responsive Design** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠

### üåü Key Innovations (2025)
1. **IoT Device Discovery Workflow** - ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô MQTT
2. **Database-driven Notifications** - ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ 100%
3. **Auto Cleanup Service** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå offline ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
4. **Virtual Device Ecosystem** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT ‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
5. **Faculty-based Organization** - ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢
6. **Production-grade MQTT** - 15 topics ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß
7. **Real-time Admin Interface** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö real-time
8. **Comprehensive API** - 39 endpoints ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå

---

## üìÑ License

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£

---

<div align="center">

**üåü ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô IoT Electric Energy Management System!**

*Developed with ‚ù§Ô∏è using cutting-edge technologies*

[![Made with Next.js](https://img.shields.io/badge/Made%20with-Next.js-000000?style=for-the-badge&logo=next.js)](https://nextjs.org/)
[![Powered by TypeScript](https://img.shields.io/badge/Powered%20by-TypeScript-3178C6?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)
[![SSE Enabled](https://img.shields.io/badge/SSE-Real--time-orange?style=for-the-badge)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)
[![MQTT IoT](https://img.shields.io/badge/MQTT-IoT_Ready-green?style=for-the-badge)](https://mqtt.org/)

**üìß ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤**

**üöÄ System Status: Production Ready ‚úÖ**  
**üìÖ Last Updated: 29 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2025**

</div>
