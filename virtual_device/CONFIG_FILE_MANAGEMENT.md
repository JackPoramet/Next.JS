# Virtual Device Config File Management

## üéØ ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ Config File:
1. **Prop Phase**: ‡∏™‡πà‡∏á `/prop` ‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)
2. **‡∏£‡∏±‡∏ö Config**: ‡∏ú‡πà‡∏≤‡∏ô MQTT topic `/config` 
3. **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Config**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `{DEVICE_ID}_config.json`
4. **Data Phase**: ‡∏™‡πà‡∏á `/data` ‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Config File:
1. **‡πÇ‡∏´‡∏•‡∏î Config**: ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
2. **‡∏Ç‡πâ‡∏≤‡∏° Prop Phase**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏´‡∏°‡πà
3. **Data Phase**: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## üìÑ ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå Config

```json
{
  "saved_timestamp": "2025-08-29T10:30:00.000Z",
  "device_id": "ESP32_ENGR_LAB_001",
  "config": {
    "registration_status": "approved",
    "device_id": "ESP32_ENGR_LAB_001",
    "assigned_location": {
      "building": "Computer Engineering Building",
      "floor": "2",
      "room": "Server Room A201"
    },
    "assigned_meter": {
      "meter_model": "Schneider EM6400 3-Phase",
      "power_specifications": {
        "rated_power": 65000.0
      }
    },
    "device_configuration": {
      "data_collection_interval": 60
    }
  }
}
```

## üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```bash
# ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡∏•‡πå config ‡πÄ‡∏î‡∏¥‡∏°
python virtual_device_with_config_file.py

# ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
del ESP32_ENGR_LAB_001_config.json
python virtual_device_with_config_file.py
```

## üîß ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Environment

```env
DEVICE_ID=ESP32_ENGR_LAB_001
FACULTY=engineering
MQTT_BROKER_HOST=iot666.ddns.net
MQTT_BROKER_PORT=1883
MQTT_USERNAME=electric_energy
MQTT_PASSWORD=electric_energy
DATA_INTERVAL=15
```

## üìã ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ Config File:
```
üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Virtual Device
üì± Device ID: ESP32_ENGR_LAB_001
üåê MQTT Broker: iot666.ddns.net:1883
üíæ Config File: ESP32_ENGR_LAB_001_config.json
üìÇ ‡πÇ‡∏´‡∏•‡∏î config ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå: ESP32_ENGR_LAB_001_config.json
üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠: 2025-08-29T10:30:00.000Z
‚úÖ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ñ‡∏π‡∏Å‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß - ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏° prop phase
‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏° Data Phase (‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß)
üìä ‡∏™‡πà‡∏á /data: 15.2kW (14:30:45)
```

### ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ Config File:
```
üìù ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå config - ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏° prop phase
üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏° Prop Phase (‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥)
üì§ ‡∏™‡πà‡∏á /prop: ESP32_ENGR_LAB_001 (‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥...)
üì® ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Config:
üéâ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß!
‚úÖ Config ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß: ESP32_ENGR_LAB_001_config.json
üìä ‡∏™‡πà‡∏á /data: 15.2kW (14:31:15)
```

## üí° ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

1. **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏´‡∏°‡πà** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó
2. **‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
3. **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô** ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤
4. **‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞‡∏ö‡∏ô Server** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• prop ‡∏ã‡πâ‡∏≥
